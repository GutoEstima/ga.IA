<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ga.IA - Gestão Inteligente de Atendimentos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- CORREÇÃO: Alterado de lucide-react para lucide -->
    <script src="https://unpkg.com/lucide@0.378.0/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
    
<!-- Link para o arquivo CSS -->
<body class="antialiased text-gray-800">

    <!-- Tela de Login -->
    <div id="login-screen" class="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
        <div class="w-full max-w-md p-8 space-y-8 bg-white rounded-2xl shadow-lg">
            <div class="flex flex-col items-center">
                <img src="logo gaia transparente.png" alt="Logotipo Ga.IA" class="w-48 mb-4">
                <h2 class="text-2xl font-bold text-center text-primary">Acesse sua conta</h2>
                <p class="mt-2 text-center text-sm text-gray-600">
                    Inteligência de dados para uma gestão de saúde mais eficiente.
                </p>
            </div>
            <!-- FORMULÁRIO DE LOGIN CORRIGIDO -->
            <form id="login-form" class="mt-8 space-y-6">
                <div class="space-y-4 rounded-md shadow-sm">
                    <div>
                        <label for="email-address" class="sr-only">Email</label>
                        <input id="email-address" name="email" type="email" autocomplete="email" required class="relative block w-full px-3 py-3 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-accent focus:border-accent focus:z-10 sm:text-sm" placeholder="seu.email@hospital.com" value="gestor@hospital.com">
                    </div>
                    <div>
                        <label for="password" class="sr-only">Senha</label>
                        <input id="password" name="password" type="password" autocomplete="current-password" required class="relative block w-full px-3 py-3 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-accent focus:border-accent focus:z-10 sm:text-sm" placeholder="Senha" value="123456">
                    </div>
                </div>

                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input id="remember-me" name="remember-me" type="checkbox" class="w-4 h-4 text-accent border-gray-300 rounded focus:ring-accent">
                        <label for="remember-me" class="block ml-2 text-sm text-gray-900"> Lembrar-me </label>
                    </div>

                    <div class="text-sm">
                        <a href="#" class="font-medium text-primary hover:text-accent"> Esqueceu sua senha? </a>
                    </div>
                </div>

                <div>
                    <button type="submit" id="login-button" class="relative flex justify-center w-full px-4 py-3 text-sm font-medium text-white border border-transparent rounded-md bg-primary group hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        Entrar
                    </button>
                </div>
            </form>
        </div>
         <p class="mt-6 text-xs text-center text-gray-500">&copy; 2024 Ga.IA. Todos os direitos reservados.</p>
    </div>

    <!-- Aplicação Principal -->
    <div id="app-screen" class="hidden">
        <div class="flex h-screen bg-background">
            <!-- Menu Lateral -->
            <aside class="flex flex-col w-64 bg-primary text-white">
                <div class="flex items-center justify-center h-20 border-b border-white/20">
                    <img src="logo gaia transparente.png" alt="Logotipo Ga.IA" class="w-32">
                </div>
                <nav class="flex-1 px-4 py-4 space-y-2">
                    <a href="#dashboard" class="nav-link flex items-center px-4 py-2.5 text-sm font-medium rounded-lg bg-white/20">
                        <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                        Dashboard
                    </a>
                    <a href="#previsao" class="nav-link flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-white/20">
                        <i data-lucide="calendar-clock" class="w-5 h-5 mr-3"></i>
                        Previsão Detalhada
                    </a>
                    <a href="#escala" class="nav-link flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-white/20">
                        <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                        Escala de Profissionais
                    </a>
                    <a href="#dados" class="nav-link flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-white/20">
                        <i data-lucide="database" class="w-5 h-5 mr-3"></i>
                        Fontes de Dados
                    </a>
                </nav>
                <div class="p-4 border-t border-white/20">
                     <a href="#" id="logout-button" class="flex items-center w-full px-4 py-2.5 text-sm font-medium text-left rounded-lg hover:bg-secondary">
                        <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
                        Sair
                    </a>
                </div>
            </aside>

            <!-- Conteúdo Principal -->
            <div class="flex flex-col flex-1">
                <header class="flex items-center justify-between h-20 px-8 bg-white border-b">
                    <div id="header-title" class="text-2xl font-bold text-primary">Dashboard</div>
                    <div class="flex items-center space-x-6">
                        <i data-lucide="bell" class="text-gray-500 cursor-pointer h-6 w-6 hover:text-primary"></i>
                        <div class="flex items-center">
                            <img class="w-10 h-10 rounded-full" src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Foto do usuário">
                            <div class="ml-3">
                                <p class="text-sm font-semibold text-primary">Dr. José Silva</p>
                                <p class="text-xs text-gray-500">Gestor Hospitalar</p>
                            </div>
                        </div>
                    </div>
                </header>

                <main class="flex-1 p-8 overflow-y-auto">
                    <!-- Conteúdo das telas será injetado aqui -->
                    <div id="dashboard" class="page-content">
                        <!-- Dashboard -->
                        <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4">
                            <div class="p-6 bg-white rounded-xl shadow-md flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Previsão para Hoje</p>
                                    <p class="text-3xl font-bold text-primary">124</p>
                                    <p class="text-xs text-green-500">+5% vs. ontem</p>
                                </div>
                                <div class="p-3 rounded-full bg-accent/20">
                                    <i data-lucide="bar-chart-3" class="w-6 h-6 text-accent"></i>
                                </div>
                            </div>
                             <div class="p-6 bg-white rounded-xl shadow-md flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Pico de Atendimento</p>
                                    <p class="text-3xl font-bold text-primary">18:00</p>
                                    <p class="text-xs text-gray-500">Previsão de 15 atendimentos</p>
                                </div>
                                <div class="p-3 rounded-full bg-secondary/20">
                                    <i data-lucide="clock-8" class="w-6 h-6 text-secondary"></i>
                                </div>
                            </div>
                            <div class="p-6 bg-white rounded-xl shadow-md flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Acurácia do Modelo</p>
                                    <p class="text-3xl font-bold text-primary">94.2%</p>
                                    <p class="text-xs text-gray-500">Últimos 7 dias</p>
                                </div>
                                <div class="p-3 rounded-full bg-primary/20">
                                    <i data-lucide="target" class="w-6 h-6 text-primary"></i>
                                </div>
                            </div>
                           <div class="p-6 bg-white rounded-xl shadow-md flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500">Profissionais em Escala</p>
                                    <p class="text-3xl font-bold text-primary">18</p>
                                    <p class="text-xs text-gray-500">Turno atual</p>
                                </div>
                                <div class="p-3 rounded-full bg-gray-500/20">
                                     <i data-lucide="user-check" class="w-6 h-6 text-gray-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 p-6 bg-white rounded-xl shadow-md">
                                <h3 class="font-bold text-primary">Previsão de Atendimentos - Próximas 24h</h3>
                                <div class="h-80 mt-4">
                                    <!-- Placeholder para um gráfico de linhas -->
                                     <img src="https://placehold.co/1000x400/F7F9FA/1A535C?text=Gráfico+de+Linhas+da+Previsão" class="w-full h-full object-contain rounded-lg"/>
                                </div>
                            </div>
                             <div class="p-6 bg-white rounded-xl shadow-md">
                                <h3 class="font-bold text-primary">Fatores de Influência</h3>
                                <ul class="mt-4 space-y-4">
                                    <li class="flex items-center">
                                        <div class="p-2 rounded-full bg-accent/20"><i data-lucide="sun" class="w-5 h-5 text-accent"></i></div>
                                        <span class="ml-3 text-sm">Tempo: Ensolarado, 28°C</span>
                                    </li>
                                    <li class="flex items-center">
                                        <div class="p-2 rounded-full bg-secondary/20"><i data-lucide="calendar" class="w-5 h-5 text-secondary"></i></div>
                                        <span class="ml-3 text-sm">Evento: Show no Estádio Local</span>
                                    </li>
                                    <li class="flex items-center">
                                         <div class="p-2 rounded-full bg-primary/20"><i data-lucide="trending-up" class="w-5 h-5 text-primary"></i></div>
                                        <span class="ml-3 text-sm">Tendências: Alta busca por "gripe"</span>
                                    </li>
                                     <li class="flex items-center">
                                         <div class="p-2 rounded-full bg-gray-500/20"><i data-lucide="traffic-cone" class="w-5 h-5 text-gray-600"></i></div>
                                        <span class="ml-3 text-sm">Trânsito: Moderado na região central</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div id="previsao" class="page-content hidden">
                        <!-- Previsão Detalhada com Heatmap -->
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <div class="flex justify-between items-center mb-4">
                               <h3 class="text-xl font-bold text-primary">Previsão Semanal de Atendimentos</h3>
                               <div>
                                 <input type="date" id="week-picker" class="border border-gray-300 rounded-md p-2 text-sm focus:ring-accent focus:border-accent">
                               </div>
                            </div>
                             <p class="text-sm text-gray-500 mb-6">Passe o mouse sobre uma célula para ver o número exato de atendimentos previstos.</p>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-gray-500">
                                    <thead class="text-xs text-primary uppercase bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 rounded-l-lg">Hora</th>
                                            <th scope="col" class="px-6 py-3 text-center">Segunda</th>
                                            <th scope="col" class="px-6 py-3 text-center">Terça</th>
                                            <th scope="col" class="px-6 py-3 text-center">Quarta</th>
                                            <th scope="col" class="px-6 py-3 text-center">Quinta</th>
                                            <th scope="col" class="px-6 py-3 text-center">Sexta</th>
                                            <th scope="col" class="px-6 py-3 text-center">Sábado</th>
                                            <th scope="col" class="px-6 py-3 text-center rounded-r-lg">Domingo</th>
                                        </tr>
                                    </thead>
                                    <tbody id="heatmap-body">
                                        <!-- Linhas da tabela serão geradas por JS -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="flex justify-end items-center mt-4 space-x-4">
                               <span class="text-xs font-medium">Legenda:</span>
                               <div class="flex items-center space-x-1"><div class="w-4 h-4 rounded" style="background-color: #A7F3D0;"></div><span class="text-xs">Baixo</span></div>
                               <div class="flex items-center space-x-1"><div class="w-4 h-4 rounded" style="background-color: #FDE047;"></div><span class="text-xs">Médio</span></div>
                               <div class="flex items-center space-x-1"><div class="w-4 h-4 rounded" style="background-color: #FCA5A5;"></div><span class="text-xs">Alto</span></div>
                               <div class="flex items-center space-x-1"><div class="w-4 h-4 rounded" style="background-color: #F87171;"></div><span class="text-xs">Pico</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="escala" class="page-content hidden">
                        <!-- Escala de Profissionais -->
                        <div class="bg-white p-6 rounded-xl shadow-md">
                           <h3 class="text-xl font-bold text-primary">Otimização de Escala</h3>
                           <p class="text-sm text-gray-500 mb-6">Compare a demanda prevista com a sua escala atual e faça ajustes para otimizar o atendimento.</p>
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                               <div>
                                   <h4 class="font-bold text-primary mb-2">Turno da Manhã (07:00 - 13:00)</h4>
                                   <div class="space-y-4">
                                       <div class="flex justify-between items-center text-sm">
                                           <span>Demanda Prevista:</span>
                                           <span class="font-bold text-lg">45 Pacientes</span>
                                       </div>
                                       <div class="flex justify-between items-center text-sm">
                                           <span>Equipe Atual:</span>
                                           <span class="font-bold">5 Médicos, 8 Enfermeiros</span>
                                       </div>
                                       <div class="p-4 rounded-lg bg-green-100 text-green-800 text-sm">
                                           <i data-lucide="check-circle" class="inline-block w-4 h-4 mr-1"></i>
                                           Escala otimizada. Cobertura adequada para a demanda.
                                       </div>
                                   </div>
                               </div>
                               <div>
                                   <h4 class="font-bold text-primary mb-2">Turno da Tarde (13:00 - 19:00)</h4>
                                   <div class="space-y-4">
                                       <div class="flex justify-between items-center text-sm">
                                           <span>Demanda Prevista:</span>
                                           <span class="font-bold text-lg text-secondary">82 Pacientes</span>
                                       </div>
                                       <div class="flex justify-between items-center text-sm">
                                           <span>Equipe Atual:</span>
                                           <span class="font-bold">4 Médicos, 7 Enfermeiros</span>
                                       </div>
                                       <div class="p-4 rounded-lg bg-red-100 text-red-800 text-sm">
                                            <i data-lucide="alert-triangle" class="inline-block w-4 h-4 mr-1"></i>
                                           Alerta: Risco de superlotação. Recomenda-se adicionar 1 médico e 2 enfermeiros.
                                       </div>
                                       <button class="w-full text-white bg-accent hover:bg-opacity-90 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Ajustar Escala</button>
                                   </div>
                               </div>
                           </div>
                        </div>
                    </div>
                    <div id="dados" class="page-content hidden">
                        <!-- Fontes de Dados -->
                         <div class="bg-white p-6 rounded-xl shadow-md">
                           <h3 class="text-xl font-bold text-primary mb-4">Status das Fontes de Dados</h3>
                           <p class="text-sm text-gray-500 mb-6">Acompanhe em tempo real o status das fontes de dados que alimentam nosso modelo de IA.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="cloud-sun" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">API de Clima</p>
                                            <p class="text-xs text-gray-500">Atualizado há 2 minutos</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-green-600">Online</span>
                                    </div>
                                </div>
                                 <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="ticket" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">Eventos Locais</p>
                                            <p class="text-xs text-gray-500">Atualizado há 15 minutos</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-green-600">Online</span>
                                    </div>
                                </div>
                                <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="search" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">Google Trends</p>
                                            <p class="text-xs text-gray-500">Atualizado há 5 minutos</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-green-600">Online</span>
                                    </div>
                                </div>
                                <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="car" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">API de Trânsito</p>
                                            <p class="text-xs text-gray-500">Atualizado há 1 minuto</p>
                                        </div>
                                    </div>
                                     <div class="flex items-center">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-yellow-600">Latência</span>
                                    </div>
                                </div>
                                <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="history" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">Dados Históricos (Interno)</p>
                                            <p class="text-xs text-gray-500">Sincronizado</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-green-600">Online</span>
                                    </div>
                                </div>
                                 <div class="p-4 border rounded-lg flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i data-lucide="virus" class="w-8 h-8 text-accent"></i>
                                        <div class="ml-4">
                                            <p class="font-semibold text-primary">Dados Epidemiológicos</p>
                                            <p class="text-xs text-gray-500">Atualizado hoje</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm font-medium text-green-600">Online</span>
                                    </div>
                                </div>
                            </div>
                         </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- INICIALIZAÇÃO ---
            const loginScreen = document.getElementById('login-screen');
            const appScreen = document.getElementById('app-screen');
            const loginForm = document.getElementById('login-form'); // Captura o formulário
            const logoutButton = document.getElementById('logout-button');
            
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');
            const headerTitle = document.getElementById('header-title');

            const pageTitles = {
                dashboard: "Dashboard",
                previsao: "Previsão Detalhada",
                escala: "Escala de Profissionais",
                dados: "Fontes de Dados"
            };
            
            lucide.createIcons();

            // --- FUNÇÕES ---
            
            // Função para gerar dados do heatmap
            function generateHeatmapData() {
                const tbody = document.getElementById('heatmap-body');
                if (!tbody) return;
                tbody.innerHTML = ''; // Limpa tabela antiga

                const hours = Array.from({ length: 24 }, (_, i) => `${String(i).padStart(2, '0')}:00`);

                hours.forEach(hour => {
                    const row = document.createElement('tr');
                    row.className = "bg-white border-b";

                    const hourCell = document.createElement('th');
                    hourCell.scope = 'row';
                    hourCell.className = 'px-6 py-4 font-medium text-gray-900 whitespace-nowrap';
                    hourCell.textContent = hour;
                    row.appendChild(hourCell);

                    for (let day = 0; day < 7; day++) {
                        const cell = document.createElement('td');
                        const attendance = Math.floor(Math.random() * 25); // 0 a 24 atendimentos
                        
                        let bgColorStyle = '#A7F3D0'; // Baixo
                        if (attendance > 8) bgColorStyle = '#FDE047'; // Médio
                        if (attendance > 15) bgColorStyle = '#FCA5A5'; // Alto
                        if (attendance > 20) bgColorStyle = '#F87171'; // Pico

                        cell.className = 'px-6 py-4 text-center cursor-pointer hover:ring-2 hover:ring-primary';
                        cell.style.backgroundColor = bgColorStyle;
                        cell.setAttribute('title', `${attendance} atendimentos`);
                        cell.textContent = ""; // Deixar vazio para focar na cor
                        row.appendChild(cell);
                    }
                    tbody.appendChild(row);
                });
            }


            // Função para trocar de página
            function switchPage(pageId) {
                pageContents.forEach(content => {
                    content.classList.add('hidden');
                });
                const activePage = document.getElementById(pageId);
                if (activePage) {
                    activePage.classList.remove('hidden');
                }
                
                headerTitle.textContent = pageTitles[pageId] || "Dashboard";

                // Atualiza o link ativo no menu
                navLinks.forEach(link => {
                    link.classList.remove('bg-white/20');
                    if (link.getAttribute('href') === `#${pageId}`) {
                        link.classList.add('bg-white/20');
                    }
                });
            }
            
            // --- EVENT LISTENERS ---

            // Login
            loginForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Previne o recarregamento da página, que era a causa do problema
                
                loginScreen.classList.add('hidden');
                appScreen.classList.remove('hidden');
                
                // Inicializa a primeira página e os dados
                switchPage('dashboard');
                generateHeatmapData();
                lucide.createIcons();
            });

            // Logout
            logoutButton.addEventListener('click', () => {
                appScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });

            // Navegação
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('href').substring(1);
                    switchPage(pageId);
                });
            });

            // Definir data de hoje no seletor de semana
            const today = new Date().toISOString().split('T')[0];
            const weekPicker = document.getElementById('week-picker');
            if(weekPicker) {
               weekPicker.value = today;
               weekPicker.addEventListener('change', generateHeatmapData);
            }
        });
    </script>
</body>
</html>
